(function(e){function t(t){for(var r,a,i=t[0],u=t[1],c=t[2],l=0,f=[];l<i.length;l++)a=i[l],s[a]&&f.push(s[a][0]),s[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==s[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},s={app:0},o=[];function i(e){return u.p+"js/"+({about:"about",profile:"profile",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"13c0dd3f",profile:"7dce6c88",signin:"403e566b",signup:"1243e2e1"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1,profile:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({about:"about",profile:"profile",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"35b217e0",profile:"59366632",signin:"31d6cfe0",signup:"31d6cfe0"}[e]+".css",a=u.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var i=s[o],c=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(c===r||c===a))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){i=l[o],c=i.getAttribute("data-href");if(c===r||c===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,n(s)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){a[e]=0}));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=s[e]=[t,n]});t.push(r[2]=o);var c,l=document.getElementsByTagName("head")[0],f=document.createElement("script");f.charset="utf-8",f.timeout=120,u.nc&&f.setAttribute("nonce",u.nc),f.src=i(e),c=function(t){f.onerror=f.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}s[e]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:f})},12e4);f.onerror=f.onload=c,l.appendChild(f)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var f=0;f<c.length;f++)t(c[f]);var p=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2583:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.loggedIn&&e.tokenExpired?n("div",{staticClass:"d-flex justify-content-center align-items-center h-100"},[n("h1",[e._v("Loading...")])]):n("router-view")],1)},s=[],o=n("c93e"),i=n("2f62"),u={data:function(){return{}},computed:Object(o["a"])({},Object(i["d"])("auth",["user"]),Object(i["c"])("auth",["loggedIn","tokenExpired"]))},c=u,l=(n("7faf"),n("2877")),f=Object(l["a"])(c,a,s,!1,null,null,null);f.options.__file="App.vue";var p=f.exports,d=n("8c4f"),h=n("31bd"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex flex-column",staticStyle:{height:"100%"}},[n("nav",{staticClass:"navbar navbar-expand-lg navbar-light",staticStyle:{"background-color":"#e3f2fd"}},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("\n      "+e._s(e.appName)+"\n    ")]),e._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarColor03"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item active"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("\n            Home\n          ")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[e._v("\n            About\n          ")])],1)]),e.loggedIn?[e._v("\n        Hi, "),n("b",[e._v(e._s(e.user.name))]),e._v(".\n\n        "),n("button",{staticClass:"btn btn-primary btn-sm float-right ml-2",on:{click:function(t){e.$router.push("/profile")}}},[e._v("\n          Profile\n        ")]),n("button",{staticClass:"btn btn-secondary btn-sm float-right ml-2",on:{click:e.logout}},[e._v("\n          Logout\n        ")])]:n("form",{staticClass:"form-inline"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputEmail"}},[e._v("\n            Email:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|"+e.validatorRules.email,expression:"'required|' + validatorRules.email"},{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("email")},attrs:{id:"inputEmail","error-messages":e.errors.collect("email"),"data-vv-name":"email",type:"email",placeholder:"Enter email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"inputPassword"}},[e._v("\n            Password:\n          ")]),n("input",{directives:[{name:"validate",rawName:"v-validate",value:e.validatorRules.password,expression:"validatorRules.password"},{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("password")},attrs:{id:"inputPassword","data-vv-name":"password",type:"password",placeholder:"Password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),n("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e.loading?n("span",[e._v("\n            Loading...\n          ")]):n("span",[e._v("\n            Sign in\n          ")])]),n("span",{staticClass:"ml-1"},[e._v("\n          or\n          "),n("router-link",{attrs:{to:"/signup"}},[e._v("Sign up")])],1)])],2)]),n("div",{staticClass:"container d-flex align-items-center justify-content-center",staticStyle:{height:"100%"}},[n("transition",{attrs:{name:"router",mode:"out-in"}},[n("router-view")],1)],1)])},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],g=(n("96cf"),n("3040")),b=n("d38e"),x={name:"MainLayout",mixins:[b["a"]],data:function(){return{appName:"Auth(Vue + Laravel)",form:{email:"test@test.com",password:"password"},loading:!1}},computed:Object(o["a"])({},Object(i["d"])("auth",["user"]),Object(i["c"])("auth",["token","loggedIn"])),methods:Object(o["a"])({submit:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.signin(this.form);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},Object(i["b"])("auth",["signin","logout"]))},w=x,k=Object(l["a"])(w,m,v,!1,null,null,null);k.options.__file="Main.vue";var y=k.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-100 h-100"},[n("auth"),n("hr"),n("h2",{staticClass:"mb-4 mt-5 text-center"},[e._v("\n    Users\n  ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}],staticClass:"alert alert-primary mx-auto w-50",attrs:{role:"alert"}},[e._v("\n    You need to be authorized to view.\n  ")]),n("table",{directives:[{name:"show",rawName:"v-show",value:e.users&&e.loggedIn,expression:"users && loggedIn"}],staticClass:"table"},[e._m(0),n("tbody",e._l(e.users,function(t){return n("tr",{key:t.id},[n("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),n("td",[e._v(e._s(t.name))]),n("td",[e._v(e._s(t.email))]),n("td",[e._v(e._s(t.created_at))])])}))]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"text-muted text-center"},[e._v("\n    Loading...\n  ")])],1)},E=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"thead-light"},[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("id")]),n("th",{attrs:{scope:"col"}},[e._v("Name")]),n("th",{attrs:{scope:"col"}},[e._v("Email")]),n("th",{attrs:{scope:"col"}},[e._v("Created at")])])])}],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-50 mx-auto clearfix px-5 mt-5 mb-4"},[n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/profile"}},[e._v("\n      Profile(protected route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:"/signup"}},[e._v("\n      Sign up(only guests route)\n    ")]),n("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:"/signin"}},[e._v("\n      Sign in(only guests route)\n    ")])],1),n("b",[e._v("Logged in:")]),e._v(" "+e._s(e.loggedIn)+"\n\n  "),n("br"),n("b",[e._v("User: ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}]},[e._v("–")]),e.user?n("pre",{staticClass:"pl-4"},[e._v(e._s(e.user))]):n("br"),n("b",{staticClass:"mb-2"},[e._v("Token: ")]),e.token?n("span",{attrs:{title:e.token}},[e._v("\n    "+e._s(e.token.slice(0,40)+"...")+"\n  ")]):n("span",[e._v("–")]),n("br"),n("b",[e._v("Token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.tokenExpiresInFormated||"–")}}),n("br"),n("b",[e._v("Refresh token expiration:")]),n("span",{domProps:{innerHTML:e._s(e.refreshTokenExpiresInFormated||"–")}})])},j=[],I={data:function(){return{form:{email:"test@test.com",password:"password"},loading:!1,tokenExpiresInFormated:null,refreshTokenExpiresInFormated:null}},computed:Object(o["a"])({},Object(i["d"])("auth",["token","refreshToken","tokenExpiresIn","refreshTokenExpiresIn","user"]),Object(i["c"])("auth",["loggedIn"])),mounted:function(){Math.floor(Date.now()/1e3),this.setExpiresTime(),setInterval(this.setExpiresTime,1e3)},methods:Object(o["a"])({submit:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.signin(this.form);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),setExpiresTimeByToken:function(e){if(this.loggedIn){var t=this[e+"ExpiresIn"]-Math.floor(Date.now()/1e3),n=Math.abs(t),r="0".concat(Math.floor(n/3600),"h").slice(-3),a="0".concat(Math.floor(n%3600/60),"m").slice(-3),s="0".concat(Math.floor(n%60),"s").slice(-3),o=[r,a,s].join(":");this[e+"ExpiresInFormated"]=t<=0?'<span style="color: red"> token expired '.concat(o.slice(1)," ago.</span>"):o}else this[e+"ExpiresInFormated"]=null},setExpiresTime:function(){this.setExpiresTimeByToken("token"),this.setExpiresTimeByToken("refreshToken")}},Object(i["b"])("auth",["signin"]))},R=I,T=Object(l["a"])(R,O,j,!1,null,null,null);T.options.__file="Auth.vue";var C=T.exports,S={name:"Home",components:{Auth:C},data:function(){return{users:[],loading:!1}},computed:Object(o["a"])({},Object(i["d"])("auth",["user"]),Object(i["c"])("auth",["loggedIn"])),watch:{loggedIn:function(e){e&&this.fetchUsers()}},mounted:function(){this.$get("redirect"),this.loggedIn&&this.fetchUsers()},methods:{fetchUsers:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$get("users");case 3:this.users=e.sent,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},N=S,$=Object(l["a"])(N,_,E,!1,null,null,null);$.options.__file="Home.vue";var P,A=$.exports,U=[{path:"/",component:y,children:[{name:"home",path:"/",component:A},{name:"profile",path:"/profile",component:function(){return n.e("profile").then(n.bind(null,"2ff9"))},meta:{auth:!0}},{name:"signup",path:"/signup",component:function(){return n.e("signup").then(n.bind(null,"e422"))},meta:{guest:!0}},{name:"signin",path:"/signin",component:function(){return n.e("signin").then(n.bind(null,"edc6"))},meta:{guest:!0}},{name:"about",path:"/about",component:function(){return n.e("about").then(n.bind(null,"a1d1"))}}]}],L=n("0759"),M=n.n(L),q=n("a322"),H=n("ef8b"),D="USER",B="USER_LOGGED_IN",F="USER_LOGGED_OUT",G="TOKEN",z="REFRESH_TOKEN_EXPIRED",J={user:"auth__user",token:"auth__token",tokenExpiresIn:"auth__tokenExpiresIn",refreshTokenExpiresIn:"auth__refreshTokenExpiresIn"},K=50,V="auth/",X=null,Y={namespaced:!0,state:{user:JSON.parse(localStorage.getItem(J.user)),token:localStorage.getItem(J.token),tokenExpiresIn:+localStorage.getItem(J.tokenExpiresIn),refreshTokenExpiresIn:+localStorage.getItem(J.refreshTokenExpiresIn),refreshTokenAlreadyExpired:!1},mutations:(P={},Object(q["a"])(P,D,function(e,t){return e.user=t,localStorage.setItem(J.user,JSON.stringify(t)),t}),Object(q["a"])(P,G,function(e,t){console.log("token_global",t),e.token=t&&t.accessToken||"",e.tokenExpiresIn=+(t&&t.expiresIn)||"",e.refreshTokenExpiresIn=+(t&&t.refreshTokenExpiresIn)||"",localStorage.setItem(J.token,e.token),localStorage.setItem(J.tokenExpiresIn,e.tokenExpiresIn),localStorage.setItem(J.refreshTokenExpiresIn,e.refreshTokenExpiresIn)}),Object(q["a"])(P,z,function(e){e.refreshTokenAlreadyExpired||(e.refreshTokenAlreadyExpired=!0,Z(),ee())}),Object(q["a"])(P,B,function(e){e.refreshTokenAlreadyExpired=!1,te.state.route.meta.guest&&ie.push({name:"profile"}),H["a"].$notify.success("logged in successfully!"),W(e)}),Object(q["a"])(P,F,function(e,t){t&&(H["a"].$notify.success("Logged out successfully."),Z()),te.state.route.meta.auth&&ie.push({name:"signin"}),te.state.route.meta.guest&&ie.push("/")}),P),actions:{signin:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,H["a"].$post("auth/signin",n);case 3:return a=e.sent,e.next=6,r("loggedIn",a);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),signup:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.next=3,H["a"].$post("auth/signup",n);case 3:return a=e.sent,e.next=6,r("loggedIn",a);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),loggedIn:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.dispatch,r=t.commit,a=n.user,s=n.tokenInfo,r(G,s),r(D,a),r(B);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,H["a"].$get("auth/user");case 3:return r=e.sent,a=r.user,e.abrupt("return",n(D,a));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,H["a"].$post("auth/logout");case 3:return e.next=5,n("setNullTokenAndUser");case 5:r(F,!0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refresh:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,a=t.state,e.next=3,H["a"].$post("auth/refresh");case 3:if(s=e.sent,"tokenAlreadyRefreshed"!==s.status){e.next=6;break}return e.abrupt("return");case 6:if("refreshTokenExpired"!==s.status){e.next=10;break}return e.next=9,n("refreshTokenExpired");case 9:return e.abrupt("return");case 10:r(G,s),W(a);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),refreshTokenExpired:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.commit,e.next=3,n("setNullTokenAndUser");case 3:r(z),r(F,!1);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setNullUser:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(D,null);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),setNullTokenAndUser:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(G,null),n(D,null);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),init:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.state,W(n);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},getters:{loggedIn:function(e){return!!e.user},tokenNeedToRefresh:function(e){var t=e.tokenExpiresIn-K,n=Math.floor(Date.now()/1e3);return e.token&&t<n},tokenExpired:function(e){return e.tokenExpiresIn<Math.floor(Date.now()/1e3)}}},Q=Y;function W(e){var t=e.token,n=e.tokenExpiresIn;if(t){var r=Date.now()/1e3,a=n-r-K,s=a>0?1e3*a:0;clearTimeout(X),X=setTimeout(Object(g["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te.dispatch(V+"refresh");case 2:case"end":return e.stop()}},e,this)})),s)}}function Z(){clearTimeout(X)}function ee(){H["a"].$notify.info("Please, log in again")}r["a"].use(i["a"]);var te=new i["a"].Store({plugins:[M()({predicate:["auth/USER","auth/TOKEN","auth/REFRESH_TOKEN_EXPIRED","auth/USER_LOGGED_IN","auth/USER_LOGGED_OUT"]})],modules:{auth:Q},state:{},mutations:{},actions:{}});function ne(e){e.beforeEach(function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=te.state.auth.token,s=te.state.auth.user,o=te.getters["auth/tokenNeedToRefresh"],e.prev=3,e.t0=!s&&a&&!o,!e.t0){e.next=8;break}return e.next=8,te.dispatch("auth/getUser");case 8:e.next=13;break;case 10:e.prev=10,e.t1=e["catch"](3),console.error(e.t1);case 13:!a&&s&&te.dispatch("auth/setNullUser"),r();case 15:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,n,r){return e.apply(this,arguments)}}())}function re(e){e.beforeEach(function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.auth}),s=te.state.auth.user,!a||s){e.next=6;break}return r({name:"signin"}),H["a"].$notify.error("This page requires authentication!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())}function ae(e){e.beforeEach(function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.guest}),s=te.state.auth.user,!a||!s){e.next=6;break}return r(!1),H["a"].$notify.error("This page is for guests only!"),e.abrupt("return");case 6:r();case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}())}var se=function(e){ne(e),re(e),ae(e)};r["a"].use(d["a"]);var oe=new d["a"]({mode:"history",base:"/",routes:U});Object(h["sync"])(te,oe),se(oe);var ie=oe,ue=(n("2583"),n("bc3a")),ce=n.n(ue),le=n("6424"),fe=n("fe4f"),pe="http://localhost:8000/api/";r["a"].use(le["a"],{axios:ce.a,config:{baseURL:pe},interceptors:{beforeRequest:function(e,t){if(e.baseURL===pe){var n=te.state.auth.token;n&&(e.headers.Authorization="Bearer ".concat(n))}return e},beforeResponseError:function(e){var t=e.response,n=e.message;t?Object(fe["b"])(t):n&&H["a"].$notify.error(n)}}});n("ab8b");var de=n("e440"),he=n.n(de),me=n("2685"),ve=n.n(me);n("6705");function ge(e){var t=e.title,n=e.message,r=e.type,a=e.timeout;e.cb;return r===he.a.types.warn&&(r="warning"),ve.a[r]({title:t,message:n,timeout:a})}var be={success:ge,error:ge,info:ge,warn:ge},xe={},we=function(e){xe[e]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.timeout,s=void 0===a?3e3:a;ge({type:e,title:t,message:n,timeout:s})}};for(var ke in be)we(ke);r["a"].use(he.a,be),r["a"].prototype.$notify=xe;var ye=n("7bb1");r["a"].use(ye["b"]),r["a"].config.productionTip=!1,new r["a"]({router:ie,store:te,render:function(e){return e(p)}}).$mount("#app"),te.dispatch("auth/init")},5917:function(e,t,n){},6424:function(e,t,n){"use strict";(function(e){n("2586"),n("050c"),n("aa77");var r=n("6bde"),a=n("c93e"),s=(n("6f35"),n("67d7")),o={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.axios,r=t.config,a=void 0===r?{}:r,s=t.interceptors,o=void 0===s?{}:s;if(!n)throw new Error("Vue-axios-wrapper: please, specify in the settings your axios package.");var u=new i(n,a,{interceptors:o});Object.assign(e.prototype,u)}};function i(e,t,n){var r=this;r.axiosInstance=e.create(t),u(r),c(r,n.interceptors);var o=["post","get","put","patch","delete","head","options"],i={};o.forEach(function(e){Object.defineProperty(i,"$"+e,{enumerable:!0,get:function(){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return s["a"].apply(r.axiosInstance,[e,n])}}})});var l=Object(a["a"])({},i,{get $axios(){return r.axiosInstance},get $http(){return r.axiosInstance}});return l}function u(e){var t=e.axiosInstance;t.setHeader||(t.setHeader=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("object"===Object(r["a"])(e))for(var a in e)s(a,e[a]);else"string"===typeof e&&s(e,n);function s(e,n){"auth"===e?t.setToken(n):t.defaults.headers[e]=n}return t.defaults},t.setToken||(t.setToken=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Bearer",r=e?(n?n+" ":"")+e:null;return t.setHeader("Authorization",r)})),t.deleteHeader||(t.deleteHeader=function(e){if("object"===Object(r["a"])(e)){var n=!0,a=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var u=o.value;c(u)}}catch(e){a=!0,s=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw s}}}else"string"===typeof e&&c(e);function c(e){"auth"===e?delete t.defaults.headers["Authorization"]:delete t.defaults.headers[e]}return t.defaults})}function c(e,t){e.axiosInstance.interceptors.request.use(function(n){return t.beforeRequest&&t.beforeRequest(n,e.axiosInstance)||n},function(n){return t.beforeRequestError&&t.beforeRequestError(n,e.axiosInstance),Promise.reject(n)}),e.axiosInstance.interceptors.response.use(function(n){return t.beforeResponse&&t.beforeResponse(n,e.axiosInstance),n},function(n){return t.beforeResponseError&&t.beforeResponseError(n,e.axiosInstance),Promise.reject(n)})}t["a"]=o;var l=null;"undefined"!==typeof window?l=window.Vue:"undefined"!==typeof e&&(l=e.Vue),l&&l.use(o)}).call(this,n("c8ba"))},"67d7":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("8afe");function a(e,t){return this[e].apply(this,Object(r["a"])(t)).then(function(e){var t=e.data;return t}).catch(function(e){throw e})}},"7faf":function(e,t,n){"use strict";var r=n("5917"),a=n.n(r);a.a},d38e:function(e,t,n){"use strict";n("96cf");var r=n("3040"),a=n("fe4f");t["a"]={data:function(){return{validatorRules:a["a"]}},methods:{validateByMixin:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$validator.validateAll(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},computed:{validator:function(){return a["c"]}}}},ef8b:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("2b0e"),a=r["a"].prototype},fe4f:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i});n("ac4d"),n("8a81"),n("ac6a");var r=n("7bb1"),a=n("ef8b"),s={name:"required|alpha_spaces|max:30",email:"email",password:"required|min:5"},o=new r["a"](s),i=function(e){var t=e.data,n=t.errors,r="";if(n){for(var s in n)if(n.hasOwnProperty(s)){var o=!0,i=!1,u=void 0;try{for(var c,l=n[s][Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;r+="".concat(f,"<br>")}}catch(e){i=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw u}}}}else r=t.message;a["a"].$notify.error(r)}}});
//# sourceMappingURL=app.ff4e7a46.js.map